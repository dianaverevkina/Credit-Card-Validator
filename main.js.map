{"version":3,"file":"main.js","mappings":"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","sources":["webpack://image-manager/./src/js/App.js","webpack://image-manager/./src/js/validate.js","webpack://image-manager/./src/js/CardWidget.js","webpack://image-manager/./src/js/CardsContainer.js","webpack://image-manager/./src/js/startApp.js","webpack://image-manager/./src/index.js"],"sourcesContent":["export default class App {\n  constructor(container) {\n    this.container = container;\n  }\n\n  drawWidget() {\n    return `\n    <h1 class=\"app__header\">Validate Credit Card Numbers</h1>\n    <div class=\"card-widget\">\n      <div class=\"card-widget__wrapper\">\n        <div class=\"cards\">\n          <div class=\"cards__container\">\n            <div class=\"cards__item visa\">\n              <img src=\"./images/visa.png\" alt=\"\" class=\"cards__item-img\">\n            </div>\n            <div class=\"cards__item mastercard\">\n              <img src=\"./images/mastercard.png\" alt=\"\" class=\"cards__item-img\">\n            </div>\n            <div class=\"cards__item mir\">\n              <img src=\"./images/mir.png\" alt=\"\" class=\"cards__item-img\">\n            </div>\n            <div class=\"cards__item unionPay\">\n              <img src=\"./images/unionPay.png\" alt=\"\" class=\"cards__item-img\">\n            </div>\n          </div>\n        </div>\n        <form action=\"\" class=\"card-widget__form\">\n          <div class=\"card-widget__field\">\n            <input name=\"card-number\" class=\"card-widget__input\">\n          </div>\n          <button class=\"card-widget__btn\">Click to Validate</button>\n        </form>\n      </div>\n    </div>\n    `;\n  }\n\n  bindToDOM() {\n    this.container.innerHTML = this.drawWidget();\n\n    this.widget = this.container.querySelector('.card-widget');\n    this.cardWidgetForm = this.widget.querySelector('.card-widget__form');\n    this.cardWidgetInput = this.widget.querySelector('.card-widget__input');\n    this.cardWidgetBtn = this.widget.querySelector('.card-widget__btn');\n\n    this.cardsContainer = this.container.querySelector('.cards__container');\n    this.cards = [...this.cardsContainer.querySelectorAll('.cards__item')];\n  }\n}\n","export default function validateCardNumber(cardNumber) {\n  // Разбиваем номер карты на цифры и переворачиваем его\n  const digits = cardNumber.split('').map(Number).reverse();\n\n  let sum = 0;\n  for (let i = 0; i < digits.length; i++) {\n    let digit = digits[i];\n\n    if (i % 2 === 1) {\n      digit *= 2;\n\n      if (digit > 9) {\n        digit -= 9;\n      }\n    }\n\n    sum += digit;\n  }\n\n  // Номер карты валиден, если сумма делится на 10 без остатка\n  return sum % 10 === 0;\n}\n","import validateCardNumber from './validate';\n\nexport default class CardWidgetForm {\n  constructor(app, selectCard) {\n    this.container = app.widget;\n    this.form = app.cardWidgetForm;\n    this.input = app.cardWidgetInput;\n    this.submitBtn = app.cardWidgetBtn;\n\n    this.selectCard = selectCard;\n\n    this.standOutCard = this.standOutCard.bind(this);\n    this.checkCardNumber = this.checkCardNumber.bind(this);\n\n    this.addEvents();\n  }\n\n  // Добавляем обработчики события\n  addEvents() {\n    this.input.addEventListener('input', this.standOutCard);\n    this.form.addEventListener('submit', this.checkCardNumber);\n    this.submitBtn.addEventListener('click', this.checkCardNumber);\n  }\n\n  // Выделяем платежную система, которой соответсвует номер карты\n  standOutCard() {\n    const cardNumber = this.input.value;\n    this.selectCard(cardNumber);\n  }\n\n  // Проверяем номер карты\n  checkCardNumber(e) {\n    e.preventDefault();\n    this.cardNumber = this.input.value.trim();\n\n    // Проверяем, что номер карты состоит только из цифр\n    if ((!/^\\d+$/.test(this.cardNumber)) || !this.cardNumber) {\n      this.showAnswer('Your card number is not valid.', false);\n      return;\n    }\n\n    const isValid = validateCardNumber(this.cardNumber);\n\n    // Номер карты валиден, если сумма делится на 10 без остатка\n    if (isValid) {\n      this.showAnswer('Your card number is valid.', true);\n    } else {\n      this.showAnswer('Your card number is not valid.', false);\n    }\n  }\n\n  // Показываем ответ о валидности карты\n  showAnswer(text, isValid) {\n    if (this.answerText) {\n      this.answerText.remove();\n    }\n\n    this.answerText = document.createElement('p');\n    this.answerText.classList.add('card-widget__answer', `card-widget__answer_${isValid ? 'valid' : 'invalid'}`);\n    this.answerText.textContent = text;\n    this.container.append(this.answerText);\n  }\n}\n","export default class CardsContainer {\n  constructor(app) {\n    this.container = app.cardsContainer;\n    this.cards = app.cards;\n\n    this.findCard = this.findCard.bind(this);\n  }\n\n  // Находим карту\n  findCard(cardNumber) {\n    this.cards.forEach((card) => {\n      if (card.classList.contains('cards__item_pale')) {\n        card.classList.remove('cards__item_pale');\n      }\n    });\n\n    if (cardNumber.startsWith('4')) {\n      this.selectCard('.visa');\n    }\n\n    if (cardNumber.startsWith('5')) {\n      this.selectCard('.mastercard');\n    }\n\n    if (cardNumber.startsWith('22')) {\n      this.selectCard('.mir');\n    }\n\n    if (cardNumber.startsWith('62')) {\n      this.selectCard('.unionPay');\n    }\n  }\n\n  // Все карты делаем черно-белыми кроме подходящей\n  selectCard(nameCard) {\n    this.cards.forEach((card) => {\n      card.classList.add('cards__item_pale');\n    });\n    this.cardEl = this.container.querySelector(nameCard);\n    this.cardEl.classList.remove('cards__item_pale');\n  }\n}\n","import App from './App';\nimport CardWidgetForm from './CardWidget';\nimport CardsContainer from './CardsContainer';\n\nconst container = document.querySelector('.app__container');\nconst app = new App(container);\n\napp.bindToDOM();\n\nconst cardsContainer = new CardsContainer(app);\nconst cardWidget = new CardWidgetForm(app, cardsContainer.findCard);\nconsole.log(cardWidget);\n","import './css/app.css';\nimport './js/startApp';\n"],"names":["App","constructor","container","drawWidget","bindToDOM","innerHTML","widget","querySelector","cardWidgetForm","cardWidgetInput","cardWidgetBtn","cardsContainer","cards","querySelectorAll","validateCardNumber","cardNumber","digits","split","map","Number","reverse","sum","i","length","digit","CardWidgetForm","app","selectCard","form","input","submitBtn","standOutCard","bind","checkCardNumber","addEvents","addEventListener","value","e","preventDefault","trim","test","showAnswer","isValid","text","answerText","remove","document","createElement","classList","add","textContent","append","CardsContainer","findCard","forEach","card","contains","startsWith","nameCard","cardEl","cardWidget","console","log"],"sourceRoot":""}